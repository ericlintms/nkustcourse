# 投影片 4/4: `with` 陳述式的重要性

## 管理資源的好幫手

當我們開啟一個檔案時，就佔用了一個系統資源。如果忘記關閉它，可能會導致問題 (尤其是在大型應用程式中)。

---

## 傳統的寫法 (不推薦)

```python
f = open('data.txt', 'r')
# ... 讀取檔案 ...
# 如果中間發生錯誤，下面這行可能不會被執行到！
f.close()
```

### 必須搭配 `try...finally` 才安全

```python
try:
    f = open('data.txt', 'r')
    # ...
finally:
    f.close()
```

---

## `with` 陳述式: 更簡潔、更安全

`with` 會自動幫你管理資源的開啟與關閉。**當 `with` 區塊結束時，檔案會自動被關閉**，即使中間發生錯誤也一樣。

```python
# 推薦使用！
with open('data.txt', 'r') as f:
    # ... 在這個區塊內對 f 進行操作 ...
    content = f.read()

# 當程式離開 with 區塊，f 會自動被 close()
```

### 永遠優先使用 `with` 來處理檔案操作！