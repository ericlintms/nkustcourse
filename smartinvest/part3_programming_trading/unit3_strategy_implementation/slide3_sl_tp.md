# 投影片 3/4: 風險管理: 停損與停利

**一個沒有停損的策略，就像一台沒有煞車的跑車。**

* **停損 (Stop Loss, SL)**: 當價格跌到某個預設的點位時，自動賣出以限制虧損擴大。
* **停利 (Take Profit, TP)**: 當價格漲到某個預設的點位時，自動賣出以鎖定獲利。

---

**為什麼重要？**

* **保護資本**: 停損可以防止單筆交易造成毀滅性的虧損。
* **克服人性**: 避免「凹單」(不願承認虧損) 和「過早獲利」(賺一點就跑) 的人性弱點。

---

**在 `backtesting.py` 中設定**

在 `self.buy()` 或 `self.sell()` (用於放空) 時，直接傳入 `sl` 和 `tp` 參數。

```python
def next(self):
    if crossover(self.fast_ma, self.slow_ma):
        # 買入時，同時設定停損和停利
        # 停損設在買入價的 10% 以下
        # 停利設在買入價的 20% 以上
        self.buy(sl=self.data.Close[-1] * 0.9, 
                 tp=self.data.Close[-1] * 1.2)
```

*注意*: `backtesting.py` 的停損停利是基於「價格點位」，而不是百分比。
